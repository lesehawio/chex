<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Apple VisionOS Flashcard â€“ Collocations</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600&display=swap');

/* Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ùˆ ØªÙ… Ù¾Ø§ÛŒÙ‡ */
:root {
  --accent:#91C200;
  --bg-dark:#05060a;
  --bg-light:#f3f4f6;
  --text-dark:#f9fafb;
  --text-light:#111827;
  --sub-dark:#9ca3af;
  --sub-light:#6b7280;
  --glass-dark:rgba(255,255,255,0.06);
  --glass-light:rgba(255,255,255,0.85);
  --border:#91C200;
}

/* Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ */
body {
  margin:0;
  padding:0;
  font-family:"Vazirmatn",sans-serif;
  background:var(--bg-dark);
  color:var(--text-dark);
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:background 0.35s ease,color 0.35s ease;
}

/* ØªÙ… Ø±ÙˆØ´Ù†/ØªÛŒØ±Ù‡ */
body.light {
  background:var(--bg-light);
  color:var(--text-light);
}

/* Ù‡Ø¯Ø± Ø«Ø§Ø¨Øª */
.header {
  position:fixed;
  top:18px;
  right:18px;
  display:flex;
  align-items:center;
  gap:10px;
  z-index:10;
}

.theme-toggle {
  font-size:1.6rem;
  cursor:pointer;
  padding:6px 12px;
  border-radius:14px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(20px);
  transition:0.25s ease;
}
.theme-toggle:hover {
  background:rgba(255,255,255,0.18);
}

.counter {
  font-size:0.9rem;
  color:var(--sub-dark);
}
body.light .counter {
  color:var(--sub-light);
}

/* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ù…Ø±Ú©Ø²ÛŒ */
.wrapper {
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}

.card-shell {
  width:420px;
  max-width:90vw;
  height:340px;
}

/* Ú©Ø§Ø±Øª Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ */
.card {
  width:100%;
  height:100%;
  background:var(--glass-dark);
  border-radius:26px;
  border:2px solid var(--border);
  backdrop-filter:blur(40px) saturate(180%);
  box-shadow:0 30px 80px rgba(0,0,0,0.55);
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  padding:22px 24px;
  box-sizing:border-box;
  text-align:right;
  transition:transform 0.25s ease, background 0.35s ease;
  cursor:grab;
}
body.light .card {
  background:var(--glass-light);
}
.card.dragging {
  cursor:grabbing;
  transition:none;
}

/* Ø¨Ø§Ù„Ø§ÛŒ Ú©Ø§Ø±Øª */
.card-header {
  font-size:0.85rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  color:var(--sub-dark);
}
body.light .card-header {
  color:var(--sub-light);
}

/* Ù…Ø­ØªÙˆØ§ */
.chunk {
  font-size:1.5rem;
  font-weight:700;
  margin-top:8px;
  margin-bottom:4px;
}

.meaning {
  font-size:1.05rem;
  color:var(--accent);
  margin-bottom:10px;
}

.desc {
  font-size:0.95rem;
  color:var(--sub-dark);
  margin-bottom:10px;
  line-height:1.7;
}
body.light .desc {
  color:var(--sub-light);
}

.usage {
  margin-top:6px;
  background:rgba(255,255,255,0.08);
  border-radius:14px;
  padding:10px 12px;
  font-size:0.9rem;
  line-height:1.7;
}
body.light .usage {
  background:rgba(255,255,255,0.9);
}

/* Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª */
.progress-bar {
  width:100%;
  height:6px;
  border-radius:999px;
  background:rgba(255,255,255,0.08);
  overflow:hidden;
  margin-top:10px;
}
.progress-fill {
  height:100%;
  width:0%;
  background:var(--accent);
  transition:width 0.25s ease;
}
</style>
</head>
<body>

<div class="header">
  <span id="counter" class="counter"></span>
  <div id="themeToggle" class="theme-toggle">ğŸŒ™</div>
</div>

<div class="wrapper">
  <div class="card-shell">
    <div id="card" class="card">
      <div>
        <div class="card-header">
          <span>Chunk Flashcard</span>
          <span id="indexLabel"></span>
        </div>
        <div class="chunk" id="chunk"></div>
        <div class="meaning" id="meaning"></div>
        <div class="desc" id="desc"></div>
        <div class="usage" id="usage"></div>
      </div>
      <div class="progress-bar">
        <div id="progress" class="progress-fill"></div>
      </div>
    </div>
  </div>
</div>

<script>
// ========== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù„ÙˆÚ©ÛŒØ´Ù† ==========
const collocations = [
  {
    noun: {w: "course", fa: "Ø¯ÙˆØ±Ù‡", pr: "Ú©ÙˆØ±Ø³"},
    verb: {w: "take", fa: "Ú¯Ø°Ø±Ø§Ù†Ø¯Ù†", pr: "ØªÙÛŒÚ©"},
    chunk: "take a course",
    chunkFa: "Ú¯Ø°Ø±Ø§Ù†Ø¯Ù† Ø¯ÙˆØ±Ù‡"
  },
  {
    noun: {w: "class", fa: "Ú©Ù„Ø§Ø³", pr: "Ú©Ù„Ø³"},
    verb: {w: "participate in", fa: "Ø´Ø±Ú©Øª Ú©Ø±Ø¯Ù† Ø¯Ø±", pr: "Ù¾Ø§Ø±ØªÛŒØ³ÛŒÙ¾ÛŒØª Ø§ÛŒÙ†"},
    chunk: "participate in class",
    chunkFa: "Ø´Ø±Ú©Øª Ø¯Ø± Ú©Ù„Ø§Ø³"
  },
  {
    noun: {w: "exam", fa: "Ø§Ù…ØªØ­Ø§Ù†", pr: "Ø§Ú¯Ø²ÙÙ…"},
    verb: {w: "study for", fa: "Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø¨Ø±Ø§ÛŒ", pr: "Ø§Ø³ØªØ§Ø¯ÛŒ ÙÙˆØ±"},
    chunk: "study for an exam",
    chunkFa: "Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ù…ØªØ­Ø§Ù†"
  },
  {
    noun: {w: "questions", fa: "Ø³ÙˆØ§Ù„Ø§Øª", pr: "Ú©ÙˆØ¦Ø³Ú†Ù†Ø²"},
    verb: {w: "answer", fa: "Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù†", pr: "Ø§Ù†Ø³Ø±"},
    chunk: "answer questions",
    chunkFa: "Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù† Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª"
  },
  {
    noun: {w: "results", fa: "Ù†ØªØ§ÛŒØ¬", pr: "Ø±ÛŒØ²Ø§Ù„ØªØ³"},
    verb: {w: "discuss", fa: "Ø¨Ø­Ø« Ú©Ø±Ø¯Ù†", pr: "Ø¯ÛŒØ³Ú©Ø§Ø³"},
    chunk: "discuss results",
    chunkFa: "Ø¨Ø­Ø« Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù†ØªØ§ÛŒØ¬"
  },
  {
    noun: {w: "experiment", fa: "Ø¢Ø²Ù…Ø§ÛŒØ´", pr: "Ø§Ú©Ø³Ù¾Ø±ÛŒÙ…Ù†Øª"},
    verb: {w: "run", fa: "Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†", pr: "Ø±Ø§Ù†"},
    chunk: "run an experiment",
    chunkFa: "Ø§Ù†Ø¬Ø§Ù… Ø¢Ø²Ù…Ø§ÛŒØ´"
  },
  {
    noun: {w: "summary", fa: "Ø®Ù„Ø§ØµÙ‡", pr: "Ø³Ø§Ù…Ø±ÛŒ"},
    verb: {w: "write", fa: "Ù†ÙˆØ´ØªÙ†", pr: "Ø±Ø§ÛŒØª"},
    chunk: "write a summary",
    chunkFa: "Ù†ÙˆØ´ØªÙ† Ø®Ù„Ø§ØµÙ‡"
  },
  {
    noun: {w: "report", fa: "Ú¯Ø²Ø§Ø±Ø´", pr: "Ø±ÛŒÙ¾ÙˆØ±Øª"},
    verb: {w: "write", fa: "Ù†ÙˆØ´ØªÙ†", pr: "Ø±Ø§ÛŒØª"},
    chunk: "write a report",
    chunkFa: "Ù†ÙˆØ´ØªÙ† Ú¯Ø²Ø§Ø±Ø´"
  },
  {
    noun: {w: "advice", fa: "Ù…Ø´Ø§ÙˆØ±Ù‡", pr: "Ø§Ø¯ÙˆØ§ÛŒØ³"},
    verb: {w: "ask for", fa: "Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ø±Ø¯Ù†", pr: "Ø§Ø³Ú© ÙÙˆØ±"},
    chunk: "ask for advice",
    chunkFa: "Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø´Ø§ÙˆØ±Ù‡"
  },
  {
    noun: {w: "research", fa: "ØªØ­Ù‚ÛŒÙ‚", pr: "Ø±ÛŒØ³Ø±Ú†"},
    verb: {w: "take part in", fa: "Ø´Ø±Ú©Øª Ú©Ø±Ø¯Ù† Ø¯Ø±", pr: "ØªÛŒÚ© Ù¾Ø§Ø±Øª Ø§ÛŒÙ†"},
    chunk: "take part in research",
    chunkFa: "Ø´Ø±Ú©Øª Ø¯Ø± ØªØ­Ù‚ÛŒÙ‚"
  },
  {
    noun: {w: "project", fa: "Ù¾Ø±ÙˆÚ˜Ù‡", pr: "Ù¾Ø±Ø§Ø¬Ú©Øª"},
    verb: {w: "plan", fa: "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ú©Ø±Ø¯Ù†", pr: "Ù¾Ù„Ù†"},
    chunk: "plan a project",
    chunkFa: "Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡"
  },
  {
    noun: {w: "training", fa: "Ø¢Ù…ÙˆØ²Ø´", pr: "ØªØ±ÛŒÙ†ÛŒÙ†Ú¯"},
    verb: {w: "attend", fa: "Ø´Ø±Ú©Øª Ú©Ø±Ø¯Ù†", pr: "Ø§ØªÙ†Ø¯"},
    chunk: "attend training",
    chunkFa: "Ø´Ø±Ú©Øª Ø¯Ø± Ø¢Ù…ÙˆØ²Ø´"
  },
  {
    noun: {w: "slides", fa: "Ø§Ø³Ù„Ø§ÛŒØ¯Ù‡Ø§", pr: "Ø§Ø³Ù„Ø§ÛŒØ¯Ø²"},
    verb: {w: "prepare", fa: "Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ø±Ø¯Ù†", pr: "Ù¾Ø±Ù¾ÙØ±"},
    chunk: "prepare slides",
    chunkFa: "Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ø±Ø¯Ù† Ø§Ø³Ù„Ø§ÛŒØ¯"
  },
  {
    noun: {w: "feedback", fa: "Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯", pr: "ÙÛŒØ¯Ø¨Ú©"},
    verb: {w: "review", fa: "Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø±Ø¯Ù†", pr: "Ø±ÛŒÙˆÛŒÙˆ"},
    chunk: "review feedback",
    chunkFa: "Ù…Ø±ÙˆØ± Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯"
  },
  {
    noun: {w: "deadlines", fa: "Ø¯Ø¯Ù„Ø§ÛŒÙ†â€ŒÙ‡Ø§", pr: "Ø¯Ø¯Ù„Ø§ÛŒÙ†Ø²"},
    verb: {w: "meet", fa: "Ø±Ø¹Ø§ÛŒØª Ú©Ø±Ø¯Ù†", pr: "Ù…ÛŒØª"},
    chunk: "meet deadlines",
    chunkFa: "Ø±Ø¹Ø§ÛŒØª Ø¯Ø¯Ù„Ø§ÛŒÙ†"
  },
  {
    noun: {w: "assignments", fa: "ØªÚ©Ø§Ù„ÛŒÙ", pr: "Ø§Ø³Ø§ÛŒÙ†Ù…Ù†ØªØ³"},
    verb: {w: "talk about", fa: "ØµØ­Ø¨Øª Ú©Ø±Ø¯Ù† Ø¯Ø±Ø¨Ø§Ø±Ù‡", pr: "ØªØ§Ú© Ø§Ø¨Ø§ÙˆØª"},
    chunk: "talk about assignments",
    chunkFa: "ØµØ­Ø¨Øª Ø¯Ø±Ø¨Ø§Ø±Ù‡ ØªÚ©Ø§Ù„ÛŒÙ"
  },
  {
    noun: {w: "initiative", fa: "Ø§Ø¨ØªÚ©Ø§Ø± Ø¹Ù…Ù„", pr: "Ø§ÛŒÙ†ÛŒØ´ÛŒØªÛŒÙˆ"},
    verb: {w: "take", fa: "Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù†", pr: "ØªÛŒÚ©"},
    chunk: "take initiative",
    chunkFa: "Ø§Ø¨ØªÚ©Ø§Ø± Ø¹Ù…Ù„ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù†"
  }
];

// ========== ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ ÙØ±Ù…Øª ÙÙ„Ø´Ú©Ø§Ø±Øª ==========
const chunks = collocations.map(item => {
  // Ø³Ø§Ø®Øª ØªÙˆØ¶ÛŒØ­ (desc)
  const verbText = item.verb.w;
  const nounText = item.noun.w;
  const desc = `ØªØ±Ú©ÛŒØ¨ Â«${verbText} + ${nounText}Â» ÛŒØ¹Ù†ÛŒ ${item.chunkFa}.`;

  // Ø³Ø§Ø®Øª Ù…Ø«Ø§Ù„ (usage)
  // Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø¯Ú¯ÛŒØŒ ÛŒÚ© Ù…Ø«Ø§Ù„ Ø¹Ù…ÙˆÙ…ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²ÛŒÙ…. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ú©Ù†ÛŒØ¯.
  let exampleEn = "";
  let exampleFa = "";
  if (item.chunk.includes("a") || item.chunk.includes("an")) {
    exampleEn = `I need to ${item.chunk}.`;
  } else {
    exampleEn = `We should ${item.chunk}.`;
  }
  // ØªØ±Ø¬Ù…Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ
  if (item.chunkFa.includes("Ú©Ø±Ø¯Ù†") || item.chunkFa.includes("Ø¯Ø§Ø¯Ù†")) {
    exampleFa = `Ù…Ù† Ø¨Ø§ÛŒØ¯ ${item.chunkFa} Ú©Ù†Ù….`;
  } else {
    exampleFa = `Ù…Ø§ Ø¨Ø§ÛŒØ¯ ${item.chunkFa}.`;
  }

  return {
    en: item.chunk,
    fa: item.chunkFa,
    desc: desc,
    usage: `${exampleEn}\n${exampleFa}`
  };
});

// ========== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ==========
let index = 0;

const cardEl    = document.getElementById("card");
const chunkEl   = document.getElementById("chunk");
const meaningEl = document.getElementById("meaning");
const descEl    = document.getElementById("desc");
const usageEl   = document.getElementById("usage");
const counterEl = document.getElementById("counter");
const indexLabel= document.getElementById("indexLabel");
const progressEl= document.getElementById("progress");
const themeToggle = document.getElementById("themeToggle");

function renderCard(){
  const item = chunks[index];
  chunkEl.textContent   = item.en;
  meaningEl.textContent = item.fa;
  descEl.textContent    = item.desc;
  usageEl.innerHTML     = item.usage.replace(/\n/g,"<br>");
  counterEl.textContent = `${index+1} / ${chunks.length}`;
  indexLabel.textContent= `Card ${index+1}`;
  progressEl.style.width = ((index+1)/chunks.length)*100 + "%";
  cardEl.style.transform = "translateX(0)";
}
renderCard();

// ========== Ø¯Ø±Ú¯ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Øª Ø¨Ø¹Ø¯ÛŒ/Ù‚Ø¨Ù„ÛŒ ==========
let startX = 0;
let dragging = false;

function startDrag(e){
  dragging = true;
  cardEl.classList.add("dragging");
  startX = e.touches ? e.touches[0].clientX : e.clientX;
}

function onDrag(e){
  if(!dragging) return;
  const x = e.touches ? e.touches[0].clientX : e.clientX;
  const delta = x - startX;
  cardEl.style.transform = `translateX(${delta}px)`;
}

function endDrag(e){
  if(!dragging) return;
  dragging = false;
  cardEl.classList.remove("dragging");
  const x = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
  const delta = x - startX;
  const threshold = 80;

  if(delta > threshold && index > 0){
    index--;
  }else if(delta < -threshold && index < chunks.length-1){
    index++;
  }
  renderCard();
}

cardEl.addEventListener("mousedown", startDrag);
window.addEventListener("mousemove", onDrag);
window.addEventListener("mouseup", endDrag);

cardEl.addEventListener("touchstart", startDrag, {passive:true});
window.addEventListener("touchmove", onDrag, {passive:true});
window.addEventListener("touchend", endDrag);

// ========== ØªÙ… Ø±ÙˆØ´Ù†/ØªÛŒØ±Ù‡ ==========
themeToggle.onclick = () => {
  document.body.classList.toggle("light");
  themeToggle.textContent =
    document.body.classList.contains("light") ? "â˜€ï¸" : "ğŸŒ™";
};
</script>

</body>
</html>
